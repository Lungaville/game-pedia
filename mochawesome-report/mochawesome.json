{
  "stats": {
    "suites": 3,
    "tests": 14,
    "passes": 6,
    "pending": 0,
    "failures": 8,
    "start": "2020-05-24T08:48:16.786Z",
    "end": "2020-05-24T08:48:22.535Z",
    "duration": 5749,
    "testsRegistered": 14,
    "passPercent": 42.857142857142854,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "23586e16-43ea-4eee-a3e3-f308f78eb9fd",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
          "title": "Testing registration for all user role",
          "fullFile": "D:\\nodejs-game-restful-api\\tests\\apiTests.js",
          "file": "\\tests\\apiTests.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Register using basic user with email : basic@gmail.com",
              "fullTitle": "Testing registration for all user role Register using basic user with email : basic@gmail.com",
              "timedOut": false,
              "duration": 303,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/register')\n    .send(fakeData.user.basic)\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_INSERT)\n    .expect(response => {\n        expect(response.body.message).to.equal('Berhasil melakukan registrasi user','Response message tidak sesuai');\n        expect(response.body.data.email).to.equal( fakeData.user.basic.email,'Email yang diberikan pada response tidak sesuai')\n        expect(response.body.data.tipe).to.equal(fakeData.user.basic.tipe,'Tipe yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {},
              "uuid": "6e0703dd-0c7e-4984-83e1-85eaa946a34a",
              "parentUUID": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Register using basic pro with email : pro@gmail.com",
              "fullTitle": "Testing registration for all user role Register using basic pro with email : pro@gmail.com",
              "timedOut": false,
              "duration": 163,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/register')\n    .send(fakeData.user.pro)\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_INSERT)\n    .expect(response => {\n        expect(response.body.message).to.equal('Berhasil melakukan registrasi user','Response message tidak sesuai');\n        expect(response.body.data.email).to.equal( fakeData.user.pro.email,'Email yang diberikan pada response tidak sesuai')\n        expect(response.body.data.tipe).to.equal(fakeData.user.pro.tipe,'Tipe yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {},
              "uuid": "7f13be79-4bef-4d6e-a290-8ac47762e058",
              "parentUUID": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Register using admin user with email : admin@gmail.com",
              "fullTitle": "Testing registration for all user role Register using admin user with email : admin@gmail.com",
              "timedOut": false,
              "duration": 138,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/register')\n    .send(fakeData.user.admin)\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_INSERT)\n    .expect(response => {\n        expect(response.body.message).to.equal('Berhasil melakukan registrasi user','Response message tidak sesuai');\n        expect(response.body.data.email).to.equal( fakeData.user.admin.email,'Email yang diberikan pada response tidak sesuai')\n        expect(response.body.data.tipe).to.equal(fakeData.user.admin.tipe,'Tipe yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {},
              "uuid": "c73fce06-72ea-41cf-a0ad-ae5857e9b797",
              "parentUUID": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Basic User can login",
              "fullTitle": "Testing registration for all user role Basic User can login",
              "timedOut": false,
              "duration": 149,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/login')\n    .send({email : fakeData.user.basic.email, password: fakeData.user.basic.password })\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_GET)\n    .expect(response => {\n        expect(response.body.message).to.equal('Success Login','Response message tidak sesuai');\n        var userLogin = jwt.verify(response.body.token, 'soa2018');\n        expect(userLogin.email).to.equal(fakeData.user.basic.email,'Payload email JWT tidak sesuai')\n        global.tokenBasic = response.body.token;\n        global.userBasic = userLogin;\n    })\n    .end(done);",
              "err": {},
              "uuid": "c266fb5f-7d3d-48b8-bc8e-a56d8b15405d",
              "parentUUID": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Pro User can login",
              "fullTitle": "Testing registration for all user role Pro User can login",
              "timedOut": false,
              "duration": 175,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/login')\n    .send({email : fakeData.user.pro.email, password: fakeData.user.pro.password })\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_GET)\n    .expect(response => {\n        expect(response.body.message).to.equal('Success Login','Response message tidak sesuai');\n        var userLogin = jwt.verify(response.body.token, 'soa2018');\n        expect(userLogin.email).to.equal(fakeData.user.pro.email,'Payload email JWT tidak sesuai')\n        global.tokenPro = response.body.token;\n        global.userPro = userLogin;\n    })\n    .end(done);",
              "err": {},
              "uuid": "e12ee553-95ce-4d69-a1e5-dd40c714a316",
              "parentUUID": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Admin User can login",
              "fullTitle": "Testing registration for all user role Admin User can login",
              "timedOut": false,
              "duration": 176,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/login')\n    .send({email : fakeData.user.admin.email, password: fakeData.user.admin.password })\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_GET)\n    .expect(response => {\n        expect(response.body.message).to.equal('Success Login','Response message tidak sesuai');\n        var userLogin = jwt.verify(response.body.token, 'soa2018');\n        expect(userLogin.email).to.equal(fakeData.user.admin.email,'Payload email JWT tidak sesuai')\n        global.tokenAdmin = response.body.token;\n        global.userAdmin = userLogin;\n    })\n    .end(done);",
              "err": {},
              "uuid": "2365d40c-921b-40a4-bd7a-661a03a1667c",
              "parentUUID": "4a1415c2-5929-40be-a9ce-1899f8d0bc45",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "6e0703dd-0c7e-4984-83e1-85eaa946a34a",
            "7f13be79-4bef-4d6e-a290-8ac47762e058",
            "c73fce06-72ea-41cf-a0ad-ae5857e9b797",
            "c266fb5f-7d3d-48b8-bc8e-a56d8b15405d",
            "e12ee553-95ce-4d69-a1e5-dd40c714a316",
            "2365d40c-921b-40a4-bd7a-661a03a1667c"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 1104,
          "root": false,
          "rootEmpty": false,
          "_timeout": 4000
        },
        {
          "uuid": "ee317951-513b-4443-86ba-c977637126cf",
          "title": "Game Test",
          "fullFile": "D:\\nodejs-game-restful-api\\tests\\gameTests.js",
          "file": "\\tests\\gameTests.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Response should be when game inserted",
              "fullTitle": "Game Test Response should be when game inserted",
              "timedOut": false,
              "duration": 231,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/games')\n    .send({name :'Monster Hunter: World' , description : \"Monster Hunter: World is an action role-playing game\", created_by : 1, genre: \"1,2,3\"})\n    .set('Accept', 'application/json')\n    .set('token',global.tokenAdmin)\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_INSERT)\n    .expect(response => {\n        // console.log(respo)\n        expect(response.body.message).to.equal('Game berhasil ditambahkan','Response message tidak sesuai');\n        expect(response.body.data.description).to.equal(description,'Description yang diberikan pada response tidak sesuai')\n        expect(response.body.data.genre).to.equal(genre,'Genre yang diberikan pada resposne tidak sesuai'),\n        expect(response.body.data.created_by).to.equal(developerId,'token user yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "AssertionError: token user yang diberikan pada resposne tidak sesuai: expected 3 to equal 1",
                "estack": "AssertionError: token user yang diberikan pada resposne tidak sesuai: expected 3 to equal 1\n    at request.post.send.set.set.expect.expect.expect.response (tests\\gameTests.js:31:58)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": "- 3\n+ 1\n"
              },
              "uuid": "4e4609b9-b235-406b-ba79-9aa55b9c3b74",
              "parentUUID": "ee317951-513b-4443-86ba-c977637126cf",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Response should be when get a game",
              "fullTitle": "Game Test Response should be when get a game",
              "timedOut": false,
              "duration": 75,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .get('/games/1')\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.OK)\n    .expect(response => {\n        expect(response.body.data.name).to.equal(gameName,'Nama pada response tidak sesuai')\n        expect(response.body.data.developer.name).to.equal(developerName,'Nama developer yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "AssertionError: Nama pada response tidak sesuai: expected 'Monster Hunter: World' to equal 'The Witcher 3: Wild Hunt'",
                "estack": "AssertionError: Nama pada response tidak sesuai: expected 'Monster Hunter: World' to equal 'The Witcher 3: Wild Hunt'\n    at request.get.set.expect.expect.expect.response (tests\\gameTests.js:42:50)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": "- Monster Hunter: World\n+ The Witcher 3: Wild Hunt\n"
              },
              "uuid": "953791e5-d774-4a9e-b1b2-d86d046aec53",
              "parentUUID": "ee317951-513b-4443-86ba-c977637126cf",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Response should be when get all game",
              "fullTitle": "Game Test Response should be when get all game",
              "timedOut": false,
              "duration": 12,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .get('/games')\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.OK)\n    .expect(response => {\n        expect(response.body.data[1].name).to.equal(gameName2,'Nama pada response tidak sesuai')\n        expect(response.body.data[1].developer.name).to.equal(developerName2,'Nama developer yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "TypeError: Cannot read property 'name' of undefined",
                "estack": "TypeError: Cannot read property 'name' of undefined\n    at request.get.set.expect.expect.expect.response (tests\\gameTests.js:54:44)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": null
              },
              "uuid": "63252ca1-f2b8-48e0-a890-f1c6884e5b48",
              "parentUUID": "ee317951-513b-4443-86ba-c977637126cf",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [],
          "failures": [
            "4e4609b9-b235-406b-ba79-9aa55b9c3b74",
            "953791e5-d774-4a9e-b1b2-d86d046aec53",
            "63252ca1-f2b8-48e0-a890-f1c6884e5b48"
          ],
          "pending": [],
          "skipped": [],
          "duration": 318,
          "root": false,
          "rootEmpty": false,
          "_timeout": 4000
        },
        {
          "uuid": "8b581b1d-67f8-4af6-b508-963196f30e3c",
          "title": "Genre Test",
          "fullFile": "D:\\nodejs-game-restful-api\\tests\\genreTests.js",
          "file": "\\tests\\genreTests.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Response should be when genre inserted",
              "fullTitle": "Genre Test Response should be when genre inserted",
              "timedOut": false,
              "duration": 16,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .post('/genres')\n    .send({name :'RPG'})\n    .set('Accept', 'application/json')\n    .set('token',token)\n    .expect('Content-Type', /json/)\n    .expect(responseCode.SUCCESS_INSERT)\n    .expect(response => {\n        expect(response.body.message).to.equal('Genre berhasil ditambahkan')\n        newId = response.body.data.id\n        expect(response.body.data.name).to.equal(insertGenreName,'Nama genre yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "Error: expected 201 \"Created\", got 401 \"Unauthorized\"",
                "estack": "Error: expected 201 \"Created\", got 401 \"Unauthorized\"\n    at Test._assertStatus (node_modules\\supertest\\lib\\test.js:268:12)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": null
              },
              "uuid": "6bc73310-6f65-4cc4-841b-43520199a49a",
              "parentUUID": "8b581b1d-67f8-4af6-b508-963196f30e3c",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Response should be when get a genre with params",
              "fullTitle": "Genre Test Response should be when get a genre with params",
              "timedOut": false,
              "duration": 165,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .get('/genres?name=g')\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.OK)\n    .expect(response => {\n        expect(response.body.data[0].name).to.equal(genreName,'Nama genre pada response tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "TypeError: Cannot read property 'name' of undefined",
                "estack": "TypeError: Cannot read property 'name' of undefined\n    at request.get.set.expect.expect.expect.response (tests\\genreTests.js:36:44)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": null
              },
              "uuid": "921fcbb2-fb35-4143-bae2-7482ea46b8c9",
              "parentUUID": "8b581b1d-67f8-4af6-b508-963196f30e3c",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Response should be when get a genre with ID",
              "fullTitle": "Genre Test Response should be when get a genre with ID",
              "timedOut": true,
              "duration": 4011,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .get(`/genres/${newId}`)\n    .set('Accept', 'application/json')\n    .expect('Content-Type', /json/)\n    .expect(responseCode.OK)\n    .expect(response => {\n        expect(response.body.data.name).to.equal(genreName,'Nama genre pada response tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "Error: Timeout of 4000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (D:\\nodejs-game-restful-api\\tests\\genreTests.js)",
                "estack": "Error: Timeout of 4000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (D:\\nodejs-game-restful-api\\tests\\genreTests.js)",
                "diff": null
              },
              "uuid": "42997fe4-dd91-4560-b8b2-6a6971ed55d1",
              "parentUUID": "8b581b1d-67f8-4af6-b508-963196f30e3c",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Response should be when genre updated",
              "fullTitle": "Genre Test Response should be when genre updated",
              "timedOut": false,
              "duration": 6,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .patch(`/genres/${newId}`)\n    .send({name :'RPGS'})\n    .set('Accept', 'application/json')\n    .set('token',token)\n    .expect('Content-Type', /json/)\n    .expect(responseCode.OK)\n    .expect(response => {\n        expect(response.body.message).to.equal('Genre berhasil diupdate')\n        expect(response.body.data.name).to.equal(newGenreName,'Nama genre baru yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "Error: expected 200 \"OK\", got 401 \"Unauthorized\"",
                "estack": "Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Test._assertStatus (node_modules\\supertest\\lib\\test.js:268:12)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": null
              },
              "uuid": "20e4db80-1418-4335-8ef8-3f6ccf529458",
              "parentUUID": "8b581b1d-67f8-4af6-b508-963196f30e3c",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Response should be when genre deleted",
              "fullTitle": "Genre Test Response should be when genre deleted",
              "timedOut": false,
              "duration": 36,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "request(app)\n    .delete(`/genres/${newId}`)\n    .set('Accept', 'application/json')\n    .set('token',token)\n    .expect('Content-Type', /json/)\n    .expect(responseCode.OK)\n    .expect(response => {\n        expect(response.body.message).to.equal('Genre berhasil dihapus')\n        expect(response.body.data.name).to.equal(newGenreName,'Nama genre baru yang diberikan pada resposne tidak sesuai')\n    })\n    .end(done);",
              "err": {
                "message": "Error: expected 200 \"OK\", got 401 \"Unauthorized\"",
                "estack": "Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Test._assertStatus (node_modules\\supertest\\lib\\test.js:268:12)\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:283:11)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:173:18)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:131:12)\n    at emitCloseNT (net.js:1616:8)\n    at process._tickCallback (internal/process/next_tick.js:63:19)",
                "diff": null
              },
              "uuid": "ea67351e-1ce9-41d3-b740-43e576d96389",
              "parentUUID": "8b581b1d-67f8-4af6-b508-963196f30e3c",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [],
          "failures": [
            "6bc73310-6f65-4cc4-841b-43520199a49a",
            "921fcbb2-fb35-4143-bae2-7482ea46b8c9",
            "42997fe4-dd91-4560-b8b2-6a6971ed55d1",
            "20e4db80-1418-4335-8ef8-3f6ccf529458",
            "ea67351e-1ce9-41d3-b740-43e576d96389"
          ],
          "pending": [],
          "skipped": [],
          "duration": 4234,
          "root": false,
          "rootEmpty": false,
          "_timeout": 4000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 4000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.1.2"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "6.1.1"
    },
    "marge": {
      "options": null,
      "version": "5.1.0"
    }
  }
}